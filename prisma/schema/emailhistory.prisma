// Email tracking model
// Stores history of emails sent to clients

model EmailHistory {
  id        String   @id @default(cuid())
  clientId  String
  client    Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)
  
  recipientEmail String
  subject   String
  body      String   @db.Text
  
  status    String   @default("Pending") // 'Sent', 'Failed', or 'Pending'
  reason    String?  // Error reason if Failed
  
  sentAt    DateTime @default(now())
  method    String?  // 'SMTP' or 'Brevo'
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([clientId])
  @@index([sentAt])
  @@index([status])
  @@map("email_history")
}
